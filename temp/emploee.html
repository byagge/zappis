<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resso Employees CRM</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom gradients and effects */
        .gradient-bg {
            background: linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%);
        }
        .hover-scale {
            transition: transform 0.2s;
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col" style="font-family: system-ui, -apple-system, sans-serif;">
    <div x-data="ressoEmployees()">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between fixed top-0 left-0 right-0 z-30">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">R</span>
                    </div>
                    <span class="font-semibold text-gray-900">Resso</span>
                    <span class="text-gray-400">•</span>
                    <span class="text-gray-600">Управление персоналом</span>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <button @click="showEmployeeModal = true; selectedEmployee = null; setEmployeeForm()"
                        class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2">
                    <i data-lucide="plus" class="w-4 h-4"></i>
                    <span>Новый сотрудник</span>
                </button>
                <div class="flex bg-gray-100 rounded-lg p-1">
                    <button @click="view = 'list'"
                            :class="{'bg-white shadow-sm text-blue-600': view === 'list', 'text-gray-600 hover:text-gray-900': view !== 'list'}"
                            class="px-3 py-1 rounded-md text-sm transition-colors">
                        <i data-lucide="list" class="w-4 h-4 inline-block mr-1"></i>
                        Список
                    </button>
                    <button @click="view = 'grid'"
                            :class="{'bg-white shadow-sm text-blue-600': view === 'grid', 'text-gray-600 hover:text-gray-900': view !== 'grid'}"
                            class="px-3 py-1 rounded-md text-sm transition-colors">
                        <i data-lucide="grid" class="w-4 h-4 inline-block mr-1"></i>
                        Сетка
                    </button>
                </div>
                <div class="relative">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                    <input type="text" 
                           placeholder="Поиск сотрудников..."
                           class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"
                           x-model="searchQuery"
                           @input="searchEmployees">
                </div>
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                    <i data-lucide="user" class="w-4 h-4 text-white"></i>
                </div>
            </div>
        </header>

        <div class="flex flex-1 overflow-hidden pt-16">
            <!-- Sidebar -->
            <aside class="w-64 bg-white border-r border-gray-200 p-4 space-y-6 fixed left-0 top-16 bottom-0 overflow-y-auto no-scrollbar">
                <!-- Navigation Menu -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-medium text-gray-900">Навигация</h3>
                        <button @click="isNavCollapsed = !isNavCollapsed" 
                                class="text-gray-500 hover:text-blue-600 transition-colors duration-200 p-1 rounded-lg hover:bg-blue-50">
                            <i data-lucide="chevron-down" 
                               class="w-5 h-5 transition-all duration-300 ease-in-out"
                               :class="{'rotate-180': isNavCollapsed}"></i>
                        </button>
                    </div>
                    <div class="space-y-1 overflow-hidden transition-all duration-300 ease-in-out"
                         :class="{'max-h-0 opacity-0': isNavCollapsed, 'max-h-[500px] opacity-100': !isNavCollapsed}">
                        <a href="index.html" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="home" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Главная</span>
                        </a>
                        <a href="emploee.html" class="flex items-center space-x-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg">
                            <i data-lucide="users" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Сотрудники</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="user-plus" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Клиенты</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="calendar" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Записи</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="scissors" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Услуги</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="dollar-sign" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Финансы</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="bar-chart-2" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Отчеты</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="settings" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Настройки</span>
                        </a>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-medium text-gray-900">Статистика</h3>
                        <button @click="isStatsCollapsed = !isStatsCollapsed" 
                                class="text-gray-500 hover:text-blue-600 transition-colors duration-200 p-1 rounded-lg hover:bg-blue-50">
                            <i data-lucide="chevron-down" 
                               class="w-5 h-5 transition-all duration-300 ease-in-out"
                               :class="{'rotate-180': isStatsCollapsed}"></i>
                        </button>
                    </div>
                    <div class="space-y-4 overflow-hidden transition-all duration-300 ease-in-out"
                         :class="{'max-h-0 opacity-0': isStatsCollapsed, 'max-h-[500px] opacity-100': !isStatsCollapsed}">
                        <div class="stat-card p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-sm text-gray-600">Всего сотрудников</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="employees.length"></div>
                                </div>
                                <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center">
                                    <i data-lucide="users" class="w-5 h-5 text-blue-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-sm text-gray-600">Активных</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="getActiveEmployeesCount()"></div>
                                </div>
                                <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                                    <i data-lucide="user-check" class="w-5 h-5 text-green-600"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card p-4 rounded-lg border border-gray-200">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="text-sm text-gray-600">В отпуске</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="getVacationEmployeesCount()"></div>
                                </div>
                                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                                    <i data-lucide="umbrella" class="w-5 h-5 text-yellow-600"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Filters -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-medium text-gray-900">Фильтры</h3>
                        <button @click="isFiltersCollapsed = !isFiltersCollapsed" 
                                class="text-gray-500 hover:text-blue-600 transition-colors duration-200 p-1 rounded-lg hover:bg-blue-50">
                            <i data-lucide="chevron-down" 
                               class="w-5 h-5 transition-all duration-300 ease-in-out"
                               :class="{'rotate-180': isFiltersCollapsed}"></i>
                        </button>
                    </div>
                    <div class="space-y-4 overflow-hidden transition-all duration-300 ease-in-out"
                         :class="{'max-h-0 opacity-0': isFiltersCollapsed, 'max-h-[500px] opacity-100': !isFiltersCollapsed}">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Должность</label>
                            <select x-model="selectedPosition"
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Все должности</option>
                                <option value="master">Мастер</option>
                                <option value="administrator">Администратор</option>
                                <option value="manager">Менеджер</option>
                                <option value="stylist">Стилист</option>
                                <option value="cosmetologist">Косметолог</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Статус</label>
                            <select x-model="selectedStatus"
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Все статусы</option>
                                <option value="active">Активный</option>
                                <option value="inactive">Неактивный</option>
                                <option value="vacation">В отпуске</option>
                                <option value="sick">На больничном</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Опыт работы</label>
                            <select x-model="selectedExperience"
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Любой опыт</option>
                                <option value="junior">До 1 года</option>
                                <option value="middle">1-3 года</option>
                                <option value="senior">Более 3 лет</option>
                            </select>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 overflow-auto ml-64 p-6">
                <!-- List View -->
                <div x-show="view === 'list'" class="space-y-4">
                    <div class="bg-white rounded-lg shadow-sm overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Сотрудник</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Должность</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Контакты</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Статистика</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Статус</th>
                                    <th class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">Действия</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <template x-for="employee in filteredEmployees" :key="employee.id">
                                    <tr class="hover:bg-gray-50">
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center">
                                                <div class="flex-shrink-0 h-10 w-10">
                                                    <div class="h-10 w-10 rounded-full bg-blue-600 flex items-center justify-center shadow-sm">
                                                        <span class="text-white font-medium" x-text="getInitials(employee.name)"></span>
                                                    </div>
                                                </div>
                                                <div class="ml-4">
                                                    <div class="text-sm font-medium text-gray-900" x-text="employee.name"></div>
                                                    <div class="text-sm text-gray-500" x-text="employee.position"></div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900" x-text="getPositionName(employee.position)"></div>
                                            <div class="text-xs text-gray-500" x-text="employee.experience + ' лет опыта'"></div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="text-sm text-gray-900" x-text="employee.phone"></div>
                                            <div class="text-sm text-gray-500" x-text="employee.email"></div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <div class="flex items-center space-x-4">
                                                <div class="text-center">
                                                    <div class="text-sm font-medium text-gray-900" x-text="employee.clientsCount"></div>
                                                    <div class="text-xs text-gray-500">Клиентов</div>
                                                </div>
                                                <div class="text-center">
                                                    <div class="text-sm font-medium text-gray-900" x-text="employee.rating"></div>
                                                    <div class="text-xs text-gray-500">Рейтинг</div>
                                                </div>
                                            </div>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap">
                                            <span :class="getStatusClasses(employee.status)"
                                                  class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                                  x-text="getStatusName(employee.status)">
                                            </span>
                                        </td>
                                        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                                            <button @click="viewEmployeeProfile(employee)" class="text-blue-600 hover:text-blue-900 mr-3">
                                                <i data-lucide="eye" class="w-4 h-4"></i>
                                            </button>
                                            <button @click="editEmployee(employee)" class="text-blue-600 hover:text-blue-900 mr-3">
                                                <i data-lucide="edit" class="w-4 h-4"></i>
                                            </button>
                                            <button @click="deleteEmployee(employee.id)" class="text-red-600 hover:text-red-900">
                                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </template>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Grid View -->
                <div x-show="view === 'grid'" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <template x-for="employee in filteredEmployees" :key="employee.id">
                        <div class="bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-lg transition-all hover-scale">
                            <div class="p-6">
                                <div class="flex items-center space-x-4">
                                    <div class="h-16 w-16 rounded-full bg-blue-600 flex items-center justify-center shadow-sm">
                                        <span class="text-white text-xl font-medium" x-text="getInitials(employee.name)"></span>
                                    </div>
                                    <div>
                                        <h3 class="text-lg font-medium text-gray-900" x-text="employee.name"></h3>
                                        <p class="text-sm text-gray-500" x-text="getPositionName(employee.position)"></p>
                                    </div>
                                </div>
                                <div class="mt-4 space-y-3">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="phone" class="w-4 h-4 mr-2"></i>
                                        <span x-text="employee.phone"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                                        <span x-text="employee.email"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="briefcase" class="w-4 h-4 mr-2"></i>
                                        <span x-text="employee.experience + ' лет опыта'"></span>
                                    </div>
                                </div>
                                <div class="mt-4 grid grid-cols-2 gap-4">
                                    <div class="bg-gray-50 rounded-lg p-3 text-center">
                                        <div class="text-sm font-medium text-gray-900" x-text="employee.clientsCount"></div>
                                        <div class="text-xs text-gray-500">Клиентов</div>
                                    </div>
                                    <div class="bg-gray-50 rounded-lg p-3 text-center">
                                        <div class="text-sm font-medium text-gray-900" x-text="employee.rating"></div>
                                        <div class="text-xs text-gray-500">Рейтинг</div>
                                    </div>
                                </div>
                                <div class="mt-4 flex items-center justify-between">
                                    <span :class="getStatusClasses(employee.status)"
                                          class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                                          x-text="getStatusName(employee.status)">
                                    </span>
                                    <div class="flex space-x-2">
                                        <button @click="viewEmployeeProfile(employee)" class="text-blue-600 hover:text-blue-900">
                                            <i data-lucide="eye" class="w-4 h-4"></i>
                                        </button>
                                        <button @click="editEmployee(employee)" class="text-blue-600 hover:text-blue-900">
                                            <i data-lucide="edit" class="w-4 h-4"></i>
                                        </button>
                                        <button @click="deleteEmployee(employee.id)" class="text-red-600 hover:text-red-900">
                                            <i data-lucide="trash-2" class="w-4 h-4"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </main>
        </div>

        <!-- Employee Modal -->
        <div x-show="showEmployeeModal" class="fixed inset-0 z-50">
            <div class="fixed inset-0 bg-black bg-opacity-50"></div>
            <div class="fixed inset-0 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto">
                    <div class="p-4 sm:p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-900" x-text="selectedEmployee ? 'Редактировать сотрудника' : 'Новый сотрудник'"></h3>
                            <button @click="showEmployeeModal = false" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                        
                        <!-- Page Navigation -->
                        <div class="flex items-center justify-between mb-6">
                            <button @click="previousPage"
                                    :class="{'opacity-50 cursor-not-allowed': currentPage === 1}"
                                    class="flex items-center text-gray-600 hover:text-gray-900">
                                <i data-lucide="chevron-left" class="w-5 h-5"></i>
                                <span class="ml-1">Назад</span>
                            </button>
                            <div class="text-sm text-gray-600">
                                Страница <span x-text="currentPage"></span> из <span x-text="totalPages"></span>
                            </div>
                            <button @click="nextPage"
                                    :class="{'opacity-50 cursor-not-allowed': currentPage === totalPages}"
                                    class="flex items-center text-gray-600 hover:text-gray-900">
                                <span class="mr-1">Далее</span>
                                <i data-lucide="chevron-right" class="w-5 h-5"></i>
                            </button>
                        </div>

                        <!-- Page 1: Basic Information -->
                        <div x-show="currentPage === 1" class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <!-- Basic Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Основная информация</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Имя</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           :class="{'border-red-500': errors.name}"
                                           x-model="employeeForm.name"
                                           placeholder="Введите имя">
                                    <div x-show="errors.name" class="mt-1 text-sm text-red-600" x-text="errors.name"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Должность</label>
                                    <select class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                            :class="{'border-red-500': errors.position}"
                                            x-model="employeeForm.position">
                                        <option value="">Выберите должность</option>
                                        <option value="master">Мастер</option>
                                        <option value="administrator">Администратор</option>
                                        <option value="manager">Менеджер</option>
                                        <option value="stylist">Стилист</option>
                                        <option value="cosmetologist">Косметолог</option>
                                    </select>
                                    <div x-show="errors.position" class="mt-1 text-sm text-red-600" x-text="errors.position"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Опыт работы (лет)</label>
                                    <input type="number" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.experience"
                                           min="0"
                                           max="50">
                                </div>
                            </div>

                            <!-- Contact Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Контактная информация</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Телефон</label>
                                    <input type="tel" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           :class="{'border-red-500': errors.phone}"
                                           x-model="employeeForm.phone"
                                           @input="formatPhoneNumber"
                                           placeholder="+996 500 123 456">
                                    <div x-show="errors.phone" class="mt-1 text-sm text-red-600" x-text="errors.phone"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                    <input type="email" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           :class="{'border-red-500': errors.email}"
                                           x-model="employeeForm.email"
                                           placeholder="email@example.com">
                                    <div x-show="errors.email" class="mt-1 text-sm text-red-600" x-text="errors.email"></div>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Адрес</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.address"
                                           placeholder="Введите адрес">
                                </div>
                            </div>
                        </div>

                        <!-- Page 2: Additional Information -->
                        <div x-show="currentPage === 2" class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <!-- Additional Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Дополнительная информация</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Дата рождения</label>
                                    <input type="date" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.birthDate">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Образование</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.education"
                                           placeholder="Введите образование">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Навыки</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.skills"
                                           placeholder="Введите навыки через запятую">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Сертификаты</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.certifications"
                                           placeholder="Введите сертификаты через запятую">
                                </div>
                            </div>

                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Языки</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.languages"
                                           placeholder="Введите языки через запятую">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Достижения</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.achievements"
                                           placeholder="Введите достижения через запятую">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Примечания</label>
                                    <textarea 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.notes"
                                           placeholder="Введите примечания"
                                           rows="3"></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Page 3: Document Information -->
                        <div x-show="currentPage === 3" class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <!-- Document Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Документы</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Номер паспорта</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.passportNumber"
                                           placeholder="Введите номер паспорта">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Дата выдачи паспорта</label>
                                    <input type="date" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.passportIssued">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Срок действия паспорта</label>
                                    <input type="date" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.passportExpiry">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">ИНН</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.taxId"
                                           placeholder="Введите ИНН">
                                </div>
                            </div>

                            <!-- Bank Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Банковская информация</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Номер счета</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.bankAccount"
                                           placeholder="Введите номер счета">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Название банка</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.bankName"
                                           placeholder="Введите название банка">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Номер страховки</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.insuranceNumber"
                                           placeholder="Введите номер страховки">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Срок действия страховки</label>
                                    <input type="date" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.insuranceExpiry">
                                </div>
                            </div>
                        </div>

                        <!-- Page 4: Work Schedule and Emergency Contact -->
                        <div x-show="currentPage === 4" class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                            <!-- Emergency Contact -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Контакт для экстренной связи</h4>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Телефон</label>
                                    <input type="tel" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.emergencyContact"
                                           placeholder="+996 500 123 456">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Имя контактного лица</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.emergencyContactName"
                                           placeholder="Введите имя">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Отношение</label>
                                    <input type="text" 
                                           class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                           x-model="employeeForm.emergencyContactRelation"
                                           placeholder="Введите отношение">
                                </div>
                            </div>

                            <!-- Work Schedule -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">График работы</h4>
                                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Понедельник</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.monday"
                                               placeholder="09:00-18:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Вторник</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.tuesday"
                                               placeholder="09:00-18:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Среда</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.wednesday"
                                               placeholder="09:00-18:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Четверг</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.thursday"
                                               placeholder="09:00-18:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Пятница</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.friday"
                                               placeholder="09:00-18:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Суббота</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.saturday"
                                               placeholder="10:00-16:00">
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Воскресенье</label>
                                        <input type="text" 
                                               class="w-full border border-gray-300 rounded-xl px-3 py-2.5 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                               x-model="employeeForm.workSchedule.sunday"
                                               placeholder="Выходной">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3">
                            <button @click="showEmployeeModal = false"
                                    class="w-full sm:w-auto px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-xl transition-colors">
                                Отмена
                            </button>
                            <button @click="saveEmployee"
                                    class="w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors">
                                <span x-text="selectedEmployee ? 'Сохранить' : 'Создать'"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Profile Modal -->
        <div x-show="showProfileModal" class="fixed inset-0 z-50">
            <div class="fixed inset-0 bg-black bg-opacity-50"></div>
            <div class="fixed inset-0 flex items-center justify-center p-4">
                <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-900">Профиль сотрудника</h3>
                            <button @click="showProfileModal = false" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-5 h-5"></i>
                            </button>
                        </div>
                        <div class="grid grid-cols-3 gap-6">
                            <!-- Profile Header -->
                            <div class="col-span-3">
                                <div class="flex items-center space-x-4">
                                    <div class="h-20 w-20 rounded-full bg-blue-600 flex items-center justify-center shadow-lg">
                                        <span class="text-white text-2xl font-medium" x-text="getInitials(selectedEmployee?.name)"></span>
                                    </div>
                                    <div>
                                        <h2 class="text-xl font-semibold text-gray-900" x-text="selectedEmployee?.name"></h2>
                                        <p class="text-gray-500" x-text="getPositionName(selectedEmployee?.position)"></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Statistics -->
                            <div class="col-span-3 grid grid-cols-4 gap-4">
                                <div class="stat-card p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Клиентов</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="selectedEmployee?.clientsCount"></div>
                                </div>
                                <div class="stat-card p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Рейтинг</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="selectedEmployee?.rating"></div>
                                </div>
                                <div class="stat-card p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Опыт</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="selectedEmployee?.experience + ' лет'"></div>
                                </div>
                                <div class="stat-card p-4 rounded-lg">
                                    <div class="text-sm text-gray-600">Статус</div>
                                    <div class="text-2xl font-semibold text-gray-900" x-text="getStatusName(selectedEmployee?.status)"></div>
                                </div>
                            </div>

                            <!-- Contact Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Контактная информация</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="phone" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.phone"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="mail" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.email"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="map-pin" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.address"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Personal Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Личная информация</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="calendar" class="w-4 h-4 mr-2"></i>
                                        <span x-text="formatDate(selectedEmployee?.birthDate)"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="graduation-cap" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.education"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Work Information -->
                            <div class="space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Рабочая информация</h4>
                                <div class="space-y-2">
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="briefcase" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.schedule"></span>
                                    </div>
                                    <div class="flex items-center text-sm text-gray-500">
                                        <i data-lucide="credit-card" class="w-4 h-4 mr-2"></i>
                                        <span x-text="selectedEmployee?.salary + ' ₽'"></span>
                                    </div>
                                </div>
                            </div>

                            <!-- Skills -->
                            <div class="col-span-3 space-y-4">
                                <h4 class="text-sm font-medium text-gray-900">Навыки</h4>
                                <div class="flex flex-wrap gap-2">
                                    <template x-for="skill in selectedEmployee?.skills?.split(',')" :key="skill">
                                        <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">
                                            <span x-text="skill.trim()"></span>
                                        </span>
                                    </template>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Toast -->
        <div x-show="toast" class="fixed top-4 right-4 z-50">
            <div :class="{'bg-green-500': toast.type === 'success', 'bg-red-500': toast.type === 'error'}"
                 class="px-4 py-3 rounded-lg shadow-lg text-white">
                <span x-text="toast.message"></span>
            </div>
        </div>
    </div>

    <!-- Alpine.js Logic -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('ressoEmployees', () => ({
                view: 'grid',
                showEmployeeModal: false,
                showProfileModal: false,
                selectedEmployee: null,
                searchQuery: '',
                selectedPosition: 'all',
                selectedStatus: 'all',
                selectedExperience: 'all',
                toast: null,
                errors: {},
                currentPage: 1,
                totalPages: 4,
                isNavCollapsed: false,
                isStatsCollapsed: false,
                isFiltersCollapsed: false,
                employeeForm: {
                    name: '',
                    position: '',
                    phone: '',
                    email: '',
                    status: 'active',
                    experience: 0,
                    birthDate: '',
                    education: '',
                    skills: '',
                    address: '',
                    salary: 0,
                    schedule: 'full',
                    clientsCount: 0,
                    rating: 0,
                    passportNumber: '',
                    passportIssued: '',
                    passportExpiry: '',
                    taxId: '',
                    bankAccount: '',
                    bankName: '',
                    emergencyContact: '',
                    emergencyContactName: '',
                    emergencyContactRelation: '',
                    startDate: '',
                    contractNumber: '',
                    contractExpiry: '',
                    vacationDaysTotal: 28,
                    vacationDaysUsed: 0,
                    sickDaysTotal: 30,
                    sickDaysUsed: 0,
                    certifications: '',
                    languages: '',
                    achievements: '',
                    notes: '',
                    equipment: '',
                    insuranceNumber: '',
                    insuranceExpiry: '',
                    performanceReviews: [],
                    trainingHistory: [],
                    workSchedule: {
                        monday: '',
                        tuesday: '',
                        wednesday: '',
                        thursday: '',
                        friday: '',
                        saturday: '',
                        sunday: ''
                    },
                    salaryHistory: [],
                    documents: []
                },
                employees: [
                    {
                        id: 1,
                        name: 'Анна Петрова',
                        position: 'master',
                        phone: '+996 500 123 456',
                        email: 'anna@example.com',
                        status: 'active',
                        experience: 5,
                        birthDate: '1990-05-15',
                        education: 'Высшее',
                        skills: 'Стрижка, Окрашивание, Укладка, Кератиновое выпрямление, Ботокс, Ламинирование, Наращивание ресниц',
                        address: 'г. Бишкек, ул. Примерная, 123',
                        salary: 85000,
                        schedule: 'Полный день',
                        clientsCount: 250,
                        rating: 4.9,
                        passportNumber: 'AN1234567',
                        passportIssued: '2020-01-15',
                        passportExpiry: '2030-01-15',
                        taxId: '123456789012',
                        bankAccount: 'KG1234567890123456',
                        bankName: 'Демир Банк',
                        emergencyContact: '+996 500 987 654',
                        emergencyContactName: 'Иван Петров',
                        emergencyContactRelation: 'Муж',
                        startDate: '2018-06-01',
                        contractNumber: 'EMP-2023-001',
                        contractExpiry: '2025-12-31',
                        vacationDaysTotal: 28,
                        vacationDaysUsed: 14,
                        sickDaysTotal: 30,
                        sickDaysUsed: 5,
                        certifications: 'Мастер-стилист, Косметолог-эстетист, Мастер по наращиванию ресниц',
                        languages: 'Русский, Английский, Кыргызский',
                        achievements: 'Лучший мастер 2023, Топ-10 стилистов города',
                        notes: 'Отличные навыки работы с клиентами, регулярно проходит повышение квалификации',
                        equipment: 'Профессиональный набор инструментов, Косметичка',
                        insuranceNumber: 'INS-123456',
                        insuranceExpiry: '2024-12-31',
                        performanceReviews: [
                            {
                                date: '2023-12-15',
                                rating: 5,
                                comments: 'Отличная работа, высокий уровень клиентского сервиса'
                            }
                        ],
                        trainingHistory: [
                            {
                                date: '2023-10-01',
                                course: 'Новые техники окрашивания',
                                provider: 'L\'Oreal Professional'
                            }
                        ],
                        workSchedule: {
                            monday: '09:00-18:00',
                            tuesday: '09:00-18:00',
                            wednesday: '09:00-18:00',
                            thursday: '09:00-18:00',
                            friday: '09:00-18:00',
                            saturday: '10:00-16:00',
                            sunday: 'Выходной'
                        },
                        salaryHistory: [
                            {
                                date: '2023-01-01',
                                amount: 75000,
                                reason: 'Ежегодное повышение'
                            },
                            {
                                date: '2023-07-01',
                                amount: 85000,
                                reason: 'Повышение квалификации'
                            }
                        ],
                        documents: [
                            {
                                type: 'Паспорт',
                                number: 'AN1234567',
                                expiry: '2030-01-15'
                            },
                            {
                                type: 'Медицинская книжка',
                                number: 'MED-123456',
                                expiry: '2024-12-31'
                            }
                        ]
                    },
                    {
                        id: 2,
                        name: 'Мария Иванова',
                        position: 'administrator',
                        phone: '+996 500 234 567',
                        email: 'maria@example.com',
                        status: 'active',
                        experience: 3,
                        birthDate: '1992-08-20',
                        education: 'Среднее специальное',
                        skills: 'Администрирование, Работа с клиентами, Управление персоналом, Ведение документации, Работа с CRM',
                        address: 'г. Бишкек, ул. Тестовая, 45',
                        salary: 65000,
                        schedule: 'Полный день',
                        clientsCount: 300,
                        rating: 4.8,
                        passportNumber: 'AN2345678',
                        passportIssued: '2021-03-20',
                        passportExpiry: '2031-03-20',
                        taxId: '234567890123',
                        bankAccount: 'KG2345678901234567',
                        bankName: 'Кыргызстан Банк',
                        emergencyContact: '+996 500 876 543',
                        emergencyContactName: 'Алексей Иванов',
                        emergencyContactRelation: 'Брат',
                        startDate: '2020-03-01',
                        contractNumber: 'EMP-2023-002',
                        contractExpiry: '2025-12-31',
                        vacationDaysTotal: 28,
                        vacationDaysUsed: 21,
                        sickDaysTotal: 30,
                        sickDaysUsed: 3,
                        certifications: 'Администратор салона красоты, Менеджер по работе с клиентами',
                        languages: 'Русский, Английский, Кыргызский',
                        achievements: 'Лучший администратор 2023, Увеличение клиентской базы на 40%',
                        notes: 'Отличные организаторские способности, быстро обучается',
                        equipment: 'Рабочая станция, CRM-система',
                        insuranceNumber: 'INS-234567',
                        insuranceExpiry: '2024-12-31',
                        performanceReviews: [
                            {
                                date: '2023-12-10',
                                rating: 4.8,
                                comments: 'Хорошая работа, есть потенциал для роста'
                            }
                        ],
                        trainingHistory: [
                            {
                                date: '2023-09-15',
                                course: 'Продвинутый CRM',
                                provider: 'Microsoft Dynamics'
                            }
                        ],
                        workSchedule: {
                            monday: '08:00-17:00',
                            tuesday: '08:00-17:00',
                            wednesday: '08:00-17:00',
                            thursday: '08:00-17:00',
                            friday: '08:00-17:00',
                            saturday: '09:00-15:00',
                            sunday: 'Выходной'
                        },
                        salaryHistory: [
                            {
                                date: '2023-01-01',
                                amount: 55000,
                                reason: 'Ежегодное повышение'
                            },
                            {
                                date: '2023-07-01',
                                amount: 65000,
                                reason: 'Повышение квалификации'
                            }
                        ],
                        documents: [
                            {
                                type: 'Паспорт',
                                number: 'AN2345678',
                                expiry: '2031-03-20'
                            },
                            {
                                type: 'Медицинская книжка',
                                number: 'MED-234567',
                                expiry: '2024-12-31'
                            }
                        ]
                    },
                    {
                        id: 3,
                        name: 'Елена Сидорова',
                        position: 'manager',
                        phone: '+996 500 345 678',
                        email: 'elena@example.com',
                        status: 'vacation',
                        experience: 7,
                        birthDate: '1988-03-10',
                        education: 'Высшее',
                        skills: 'Управление персоналом, Продажи, Маркетинг, Финансовый менеджмент, Стратегическое планирование',
                        address: 'г. Бишкек, ул. Новая, 78',
                        salary: 120000,
                        schedule: 'Полный день',
                        clientsCount: 500,
                        rating: 4.9,
                        passportNumber: 'AN3456789',
                        passportIssued: '2019-06-15',
                        passportExpiry: '2029-06-15',
                        taxId: '345678901234',
                        bankAccount: 'KG3456789012345678',
                        bankName: 'РСК Банк',
                        emergencyContact: '+996 500 765 432',
                        emergencyContactName: 'Дмитрий Сидоров',
                        emergencyContactRelation: 'Муж',
                        startDate: '2016-01-01',
                        contractNumber: 'EMP-2023-003',
                        contractExpiry: '2025-12-31',
                        vacationDaysTotal: 28,
                        vacationDaysUsed: 28,
                        sickDaysTotal: 30,
                        sickDaysUsed: 2,
                        certifications: 'MBA, Профессиональный менеджер, Сертифицированный специалист по управлению персоналом',
                        languages: 'Русский, Английский, Кыргызский, Турецкий',
                        achievements: 'Лучший менеджер 2023, Увеличение прибыли на 35%, Открытие 3 новых салонов',
                        notes: 'Сильный лидер, отличные навыки управления командой',
                        equipment: 'Рабочая станция, CRM-система, Финансовое ПО',
                        insuranceNumber: 'INS-345678',
                        insuranceExpiry: '2024-12-31',
                        performanceReviews: [
                            {
                                date: '2023-12-05',
                                rating: 5,
                                comments: 'Выдающиеся результаты, отличное руководство командой'
                            }
                        ],
                        trainingHistory: [
                            {
                                date: '2023-08-01',
                                course: 'Стратегический менеджмент',
                                provider: 'Harvard Business School Online'
                            }
                        ],
                        workSchedule: {
                            monday: '09:00-18:00',
                            tuesday: '09:00-18:00',
                            wednesday: '09:00-18:00',
                            thursday: '09:00-18:00',
                            friday: '09:00-18:00',
                            saturday: 'Выходной',
                            sunday: 'Выходной'
                        },
                        salaryHistory: [
                            {
                                date: '2023-01-01',
                                amount: 100000,
                                reason: 'Ежегодное повышение'
                            },
                            {
                                date: '2023-07-01',
                                amount: 120000,
                                reason: 'Повышение квалификации и расширение обязанностей'
                            }
                        ],
                        documents: [
                            {
                                type: 'Паспорт',
                                number: 'AN3456789',
                                expiry: '2029-06-15'
                            },
                            {
                                type: 'Медицинская книжка',
                                number: 'MED-345678',
                                expiry: '2024-12-31'
                            }
                        ]
                    }
                ],

                get filteredEmployees() {
                    return this.employees.filter(employee => {
                        const matchesSearch = !this.searchQuery || 
                            employee.name.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            employee.phone.includes(this.searchQuery) ||
                            employee.email.toLowerCase().includes(this.searchQuery.toLowerCase());
                        
                        const matchesPosition = this.selectedPosition === 'all' || 
                            employee.position === this.selectedPosition;
                        
                        const matchesStatus = this.selectedStatus === 'all' || 
                            employee.status === this.selectedStatus;
                        
                        const matchesExperience = this.selectedExperience === 'all' || 
                            (this.selectedExperience === 'junior' && employee.experience < 1) ||
                            (this.selectedExperience === 'middle' && employee.experience >= 1 && employee.experience <= 3) ||
                            (this.selectedExperience === 'senior' && employee.experience > 3);
                        
                        return matchesSearch && matchesPosition && matchesStatus && matchesExperience;
                    });
                },

                getActiveEmployeesCount() {
                    return this.employees.filter(e => e.status === 'active').length;
                },

                getVacationEmployeesCount() {
                    return this.employees.filter(e => e.status === 'vacation').length;
                },

                getInitials(name) {
                    return name.split(' ')
                        .map(word => word[0])
                        .join('')
                        .toUpperCase();
                },

                getPositionName(position) {
                    const positions = {
                        'master': 'Мастер',
                        'administrator': 'Администратор',
                        'manager': 'Менеджер',
                        'stylist': 'Стилист',
                        'cosmetologist': 'Косметолог'
                    };
                    return positions[position] || position;
                },

                getStatusName(status) {
                    const statuses = {
                        'active': 'Активный',
                        'inactive': 'Неактивный',
                        'vacation': 'В отпуске',
                        'sick': 'На больничном'
                    };
                    return statuses[status] || status;
                },

                getStatusClasses(status) {
                    const classes = {
                        'active': 'bg-green-100 text-green-800',
                        'inactive': 'bg-red-100 text-red-800',
                        'vacation': 'bg-yellow-100 text-yellow-800',
                        'sick': 'bg-orange-100 text-orange-800'
                    };
                    return classes[status] || 'bg-gray-100 text-gray-800';
                },

                formatDate(date) {
                    if (!date) return '';
                    return new Date(date).toLocaleDateString('ru-RU', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    });
                },

                setEmployeeForm() {
                    if (this.selectedEmployee) {
                        this.employeeForm = { ...this.selectedEmployee };
                    } else {
                        this.employeeForm = {
                            name: '',
                            position: '',
                            phone: '',
                            email: '',
                            status: 'active',
                            experience: 0,
                            birthDate: '',
                            education: '',
                            skills: '',
                            address: '',
                            salary: 0,
                            schedule: 'full',
                            clientsCount: 0,
                            rating: 0,
                            passportNumber: '',
                            passportIssued: '',
                            passportExpiry: '',
                            taxId: '',
                            bankAccount: '',
                            bankName: '',
                            emergencyContact: '',
                            emergencyContactName: '',
                            emergencyContactRelation: '',
                            startDate: '',
                            contractNumber: '',
                            contractExpiry: '',
                            vacationDaysTotal: 28,
                            vacationDaysUsed: 0,
                            sickDaysTotal: 30,
                            sickDaysUsed: 0,
                            certifications: '',
                            languages: '',
                            achievements: '',
                            notes: '',
                            equipment: '',
                            insuranceNumber: '',
                            insuranceExpiry: '',
                            performanceReviews: [],
                            trainingHistory: [],
                            workSchedule: {
                                monday: '',
                                tuesday: '',
                                wednesday: '',
                                thursday: '',
                                friday: '',
                                saturday: '',
                                sunday: ''
                            },
                            salaryHistory: [],
                            documents: []
                        };
                    }
                    this.currentPage = 1;
                    this.errors = {};
                },

                validatePage(page) {
                    this.errors = {};
                    let isValid = true;

                    if (page === 1) {
                        if (!this.employeeForm.name) {
                            this.errors.name = 'Введите имя';
                            isValid = false;
                        }

                        if (!this.employeeForm.position) {
                            this.errors.position = 'Выберите должность';
                            isValid = false;
                        }

                        if (!this.employeeForm.phone) {
                            this.errors.phone = 'Введите номер телефона';
                            isValid = false;
                        } else {
                            const phoneRegex = /^\+996\s(500|501|502|505|550|551|552|553|554|555|556|557|558|559|700|701|702|703|704|705|706|707|708|709|770|771|772|773|774|775|776|777|778|779|990)\s\d{3}\s\d{3}$/;
                            if (!phoneRegex.test(this.employeeForm.phone)) {
                                this.errors.phone = 'Введите корректный номер телефона';
                                isValid = false;
                            }
                        }

                        if (!this.employeeForm.email) {
                            this.errors.email = 'Введите email';
                            isValid = false;
                        } else {
                            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                            if (!emailRegex.test(this.employeeForm.email)) {
                                this.errors.email = 'Введите корректный email';
                                isValid = false;
                            }
                        }
                    }

                    return isValid;
                },

                nextPage() {
                    if (this.validatePage(this.currentPage)) {
                        if (this.currentPage < this.totalPages) {
                            this.currentPage++;
                        }
                    }
                },

                previousPage() {
                    if (this.currentPage > 1) {
                        this.currentPage--;
                    }
                },

                saveEmployee() {
                    if (!this.validatePage(this.currentPage)) {
                        return;
                    }

                    if (this.selectedEmployee) {
                        const index = this.employees.findIndex(e => e.id === this.selectedEmployee.id);
                        this.employees[index] = { ...this.employeeForm, id: this.selectedEmployee.id };
                        this.showToast('Сотрудник обновлен', 'success');
                    } else {
                        const newEmployee = { ...this.employeeForm, id: Date.now() };
                        this.employees.push(newEmployee);
                        this.showToast('Сотрудник добавлен', 'success');
                    }

                    this.showEmployeeModal = false;
                    this.selectedEmployee = null;
                    this.errors = {};
                },

                editEmployee(employee) {
                    this.selectedEmployee = employee;
                    this.setEmployeeForm();
                    this.showEmployeeModal = true;
                },

                viewEmployeeProfile(employee) {
                    this.selectedEmployee = employee;
                    this.showProfileModal = true;
                },

                deleteEmployee(id) {
                    this.employees = this.employees.filter(e => e.id !== id);
                    this.showToast('Сотрудник удален', 'success');
                },

                showToast(message, type) {
                    this.toast = { message, type };
                    setTimeout(() => this.toast = null, 3000);
                },

                formatPhoneNumber(event) {
                    let value = event.target.value.replace(/\D/g, '');
                    
                    if (!value.startsWith('996')) {
                        value = '996' + value;
                    }
                    
                    if (value.length > 12) {
                        value = value.slice(0, 12);
                    }
                    
                    let formattedNumber = '+';
                    if (value.length > 0) {
                        formattedNumber += value.slice(0, 3);
                        if (value.length > 3) {
                            formattedNumber += ' ' + value.slice(3, 6);
                            if (value.length > 6) {
                                formattedNumber += ' ' + value.slice(6, 9);
                                if (value.length > 9) {
                                    formattedNumber += ' ' + value.slice(9, 12);
                                }
                            }
                        }
                    }
                    
                    this.employeeForm.phone = formattedNumber;
                },

                searchEmployees() {
                    // Search is handled by the filteredEmployees computed property
                }
            }));
        });

        // Initialize Lucide Icons
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html>
