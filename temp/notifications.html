<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resso Notifications</title>
    <!-- Tailwind CSS -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Custom gradients and effects */
        .gradient-bg {
            background: linear-gradient(135deg, #1E40AF 0%, #3B82F6 100%);
        }
        .hover-scale {
            transition: transform 0.2s;
        }
        .hover-scale:hover {
            transform: scale(1.02);
        }
        .glass-effect {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        .notification-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        .notification-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        .notification-icon {
            transition: all 0.3s ease;
        }
        .notification-card:hover .notification-icon {
            transform: scale(1.1);
        }
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #EF4444;
        }
    </style>
</head>
<body class="h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col" style="font-family: system-ui, -apple-system, sans-serif;">
    <div x-data="notifications()">
        <!-- Header -->
        <header class="bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between fixed top-0 left-0 right-0 z-30">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">R</span>
                    </div>
                    <span class="font-semibold text-gray-900">Resso</span>
                    <span class="text-gray-400">•</span>
                    <span class="text-gray-600">Уведомления</span>
                </div>
            </div>
            <div class="flex items-center space-x-4">
                <div class="flex bg-gray-100 rounded-lg p-1">
                    <button @click="view = 'all'"
                            :class="{'bg-white shadow-sm text-blue-600': view === 'all', 'text-gray-600 hover:text-gray-900': view !== 'all'}"
                            class="px-3 py-1 rounded-md text-sm transition-colors">
                        <i data-lucide="bell" class="w-4 h-4 inline-block mr-1"></i>
                        Все
                    </button>
                    <button @click="view = 'unread'"
                            :class="{'bg-white shadow-sm text-blue-600': view === 'unread', 'text-gray-600 hover:text-gray-900': view !== 'unread'}"
                            class="px-3 py-1 rounded-md text-sm transition-colors">
                        <i data-lucide="mail" class="w-4 h-4 inline-block mr-1"></i>
                        Непрочитанные
                    </button>
                    <button @click="view = 'important'"
                            :class="{'bg-white shadow-sm text-blue-600': view === 'important', 'text-gray-600 hover:text-gray-900': view !== 'important'}"
                            class="px-3 py-1 rounded-md text-sm transition-colors">
                        <i data-lucide="star" class="w-4 h-4 inline-block mr-1"></i>
                        Важные
                    </button>
                </div>
                <div class="relative">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"></i>
                    <input type="text" 
                           placeholder="Поиск уведомлений..."
                           class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64"
                           x-model="searchQuery"
                           @input="searchNotifications">
                </div>
                <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
                    <i data-lucide="user" class="w-4 h-4 text-white"></i>
                </div>
            </div>
        </header>

        <div class="flex flex-1 overflow-hidden pt-16">
            <!-- Sidebar -->
            <aside class="w-64 bg-white border-r border-gray-200 p-4 space-y-6 fixed left-0 top-16 bottom-0 overflow-y-auto no-scrollbar">
                <!-- Navigation Menu -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-medium text-gray-900">Навигация</h3>
                        <button @click="isNavCollapsed = !isNavCollapsed" 
                                class="text-gray-500 hover:text-blue-600 transition-colors duration-200 p-1 rounded-lg hover:bg-blue-50">
                            <i data-lucide="chevron-down" 
                               class="w-5 h-5 transition-all duration-300 ease-in-out"
                               :class="{'rotate-180': isNavCollapsed}"></i>
                        </button>
                    </div>
                    <div class="space-y-1 overflow-hidden transition-all duration-300 ease-in-out"
                         :class="{'max-h-0 opacity-0': isNavCollapsed, 'max-h-[500px] opacity-100': !isNavCollapsed}">
                        <a href="index.html" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="home" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Главная</span>
                        </a>
                        <a href="emploee.html" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="users" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Сотрудники</span>
                        </a>
                        <a href="notifications.html" class="flex items-center space-x-2 px-3 py-2 bg-blue-50 text-blue-600 rounded-lg">
                            <i data-lucide="bell" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Уведомления</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="user-plus" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Клиенты</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="calendar" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Записи</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="scissors" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Услуги</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="dollar-sign" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Финансы</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="bar-chart-2" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Отчеты</span>
                        </a>
                        <a href="#" class="flex items-center space-x-2 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg">
                            <i data-lucide="settings" class="w-4 h-4 flex-shrink-0"></i>
                            <span>Настройки</span>
                        </a>
                    </div>
                </div>

                <!-- Filters -->
                <div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-sm font-medium text-gray-900">Фильтры</h3>
                        <button @click="isFiltersCollapsed = !isFiltersCollapsed" 
                                class="text-gray-500 hover:text-blue-600 transition-colors duration-200 p-1 rounded-lg hover:bg-blue-50">
                            <i data-lucide="chevron-down" 
                               class="w-5 h-5 transition-all duration-300 ease-in-out"
                               :class="{'rotate-180': isFiltersCollapsed}"></i>
                        </button>
                    </div>
                    <div class="space-y-4 overflow-hidden transition-all duration-300 ease-in-out"
                         :class="{'max-h-0 opacity-0': isFiltersCollapsed, 'max-h-[500px] opacity-100': !isFiltersCollapsed}">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Тип</label>
                            <select x-model="selectedType"
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Все типы</option>
                                <option value="reminder">Напоминания</option>
                                <option value="event">События</option>
                                <option value="alert">Оповещения</option>
                                <option value="system">Системные</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Период</label>
                            <select x-model="selectedPeriod"
                                    class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="all">Все время</option>
                                <option value="today">Сегодня</option>
                                <option value="week">За неделю</option>
                                <option value="month">За месяц</option>
                            </select>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 overflow-auto ml-64 p-6">
                <!-- Notifications List -->
                <div class="space-y-4">
                    <template x-for="notification in filteredNotifications" :key="notification.id">
                        <div class="notification-card p-5 rounded-xl border border-gray-100 hover:shadow-md transition-all relative"
                             :class="{'bg-blue-50/50': notification.isImportant, 'opacity-90': notification.isRead}">
                            <div class="flex items-start space-x-4">
                                <!-- Icon -->
                                <div class="relative">
                                    <div :class="getNotificationIconClass(notification.type)"
                                         class="notification-icon w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 shadow-sm">
                                        <i :data-lucide="getNotificationIcon(notification.type)" class="w-6 h-6 text-white"></i>
                                    </div>
                                    <div x-show="!notification.isRead" class="notification-badge"></div>
                                </div>
                                
                                <!-- Content -->
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center justify-between">
                                        <h3 class="text-base font-semibold text-gray-900" x-text="notification.title"></h3>
                                        <div class="flex items-center space-x-3">
                                            <span class="text-sm text-gray-500" x-text="formatDate(notification.date)"></span>
                                            <button @click="toggleImportant(notification)" 
                                                    class="text-gray-400 hover:text-yellow-500 transition-colors p-1 rounded-full hover:bg-yellow-50">
                                                <i data-lucide="star" 
                                                   class="w-5 h-5"
                                                   :class="{'fill-yellow-500 text-yellow-500': notification.isImportant}"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <p class="mt-2 text-sm text-gray-600 leading-relaxed" x-text="notification.message"></p>
                                    <div class="mt-3 flex items-center space-x-4">
                                        <template x-if="notification.type === 'reminder'">
                                            <div class="flex items-center text-sm text-gray-500 bg-gray-50 px-3 py-1.5 rounded-full">
                                                <i data-lucide="clock" class="w-4 h-4 mr-1.5"></i>
                                                <span x-text="notification.reminderTime"></span>
                                            </div>
                                        </template>
                                        <template x-if="notification.type === 'event'">
                                            <div class="flex items-center text-sm text-gray-500 bg-gray-50 px-3 py-1.5 rounded-full">
                                                <i data-lucide="calendar" class="w-4 h-4 mr-1.5"></i>
                                                <span x-text="notification.eventDate"></span>
                                            </div>
                                        </template>
                                    </div>
                                </div>

                                <!-- Actions -->
                                <div class="flex items-center">
                                    <button @click="markAsRead(notification)" 
                                            class="text-gray-400 hover:text-blue-600 transition-colors p-2 rounded-full hover:bg-blue-50"
                                            x-show="!notification.isRead">
                                        <i data-lucide="check" class="w-5 h-5"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </template>
                </div>
            </main>
        </div>

        <!-- Toast -->
        <div x-show="toast" class="fixed top-4 right-4 z-50">
            <div :class="{'bg-green-500': toast.type === 'success', 'bg-red-500': toast.type === 'error'}"
                 class="px-4 py-3 rounded-lg shadow-lg text-white">
                <span x-text="toast.message"></span>
            </div>
        </div>
    </div>

    <!-- Alpine.js Logic -->
    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('notifications', () => ({
                view: 'all',
                searchQuery: '',
                selectedType: 'all',
                selectedPeriod: 'all',
                isNavCollapsed: false,
                isFiltersCollapsed: false,
                toast: null,
                init() {
                    this.$watch('view', () => {
                        // Reinitialize Lucide icons when view changes
                        setTimeout(() => {
                            lucide.createIcons();
                        }, 0);
                    });
                },
                notifications: [ 
                    {
                        id: 1,
                        type: 'reminder',
                        title: 'Напоминание о встрече',
                        message: 'Завтра в 10:00 встреча с новым клиентом',
                        date: '2024-03-20T09:00:00',
                        reminderTime: 'Завтра в 10:00',
                        isRead: false,
                        isImportant: true
                    },
                    {
                        id: 2,
                        type: 'event',
                        title: 'День рождения сотрудника',
                        message: 'У Анны Петровой день рождения через 3 дня',
                        date: '2024-03-19T15:30:00',
                        eventDate: '23 марта 2024',
                        isRead: true,
                        isImportant: false
                    },
                    {
                        id: 3,
                        type: 'alert',
                        title: 'Обновление системы',
                        message: 'Запланировано обновление системы на 25 марта в 23:00',
                        date: '2024-03-18T12:00:00',
                        isRead: false,
                        isImportant: true
                    },
                    {
                        id: 4,
                        type: 'system',
                        title: 'Новый сотрудник',
                        message: 'Мария Иванова добавлена в систему как администратор',
                        date: '2024-03-17T09:15:00',
                        isRead: true,
                        isImportant: false
                    },
                    {
                        id: 5,
                        type: 'reminder',
                        title: 'Плановый осмотр',
                        message: 'Не забудьте пройти плановый медицинский осмотр до конца месяца',
                        date: '2024-03-16T14:20:00',
                        reminderTime: 'До 31 марта',
                        isRead: false,
                        isImportant: false
                    }
                ],

                get filteredNotifications() {
                    return this.notifications.filter(notification => {
                        const matchesSearch = !this.searchQuery || 
                            notification.title.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            notification.message.toLowerCase().includes(this.searchQuery.toLowerCase());
                        
                        const matchesView = this.view === 'all' || 
                            (this.view === 'unread' && !notification.isRead) ||
                            (this.view === 'important' && notification.isImportant);
                        
                        const matchesType = this.selectedType === 'all' || 
                            notification.type === this.selectedType;
                        
                        const matchesPeriod = this.selectedPeriod === 'all' || 
                            this.isWithinPeriod(notification.date, this.selectedPeriod);
                        
                        return matchesSearch && matchesView && matchesType && matchesPeriod;
                    });
                },

                isWithinPeriod(date, period) {
                    const notificationDate = new Date(date);
                    const now = new Date();
                    
                    switch(period) {
                        case 'today':
                            return notificationDate.toDateString() === now.toDateString();
                        case 'week':
                            const weekAgo = new Date(now.setDate(now.getDate() - 7));
                            return notificationDate >= weekAgo;
                        case 'month':
                            const monthAgo = new Date(now.setMonth(now.getMonth() - 1));
                            return notificationDate >= monthAgo;
                        default:
                            return true;
                    }
                },

                getNotificationIcon(type) {
                    const icons = {
                        'reminder': 'clock',
                        'event': 'calendar',
                        'alert': 'alert-triangle',
                        'system': 'settings'
                    };
                    return icons[type] || 'bell';
                },

                getNotificationIconClass(type) {
                    const classes = {
                        'reminder': 'bg-blue-600',
                        'event': 'bg-green-600',
                        'alert': 'bg-yellow-600',
                        'system': 'bg-gray-600'
                    };
                    return classes[type] || 'bg-blue-600';
                },

                formatDate(date) {
                    const notificationDate = new Date(date);
                    const now = new Date();
                    const diffTime = Math.abs(now - notificationDate);
                    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                    
                    if (diffDays === 0) {
                        return 'Сегодня';
                    } else if (diffDays === 1) {
                        return 'Вчера';
                    } else if (diffDays < 7) {
                        return `${diffDays} дней назад`;
                    } else {
                        return notificationDate.toLocaleDateString('ru-RU', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });
                    }
                },

                markAsRead(notification) {
                    notification.isRead = true;
                    this.showToast('Уведомление отмечено как прочитанное', 'success');
                },

                toggleImportant(notification) {
                    notification.isImportant = !notification.isImportant;
                    this.showToast(
                        notification.isImportant ? 
                        'Уведомление отмечено как важное' : 
                        'Уведомление убрано из важных',
                        'success'
                    );
                },

                showToast(message, type) {
                    this.toast = { message, type };
                    setTimeout(() => this.toast = null, 3000);
                },

                searchNotifications() {
                    // Search is handled by the filteredNotifications computed property
                }
            }));
        });

        // Initialize Lucide Icons
        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();
        });
    </script>
</body>
</html> 